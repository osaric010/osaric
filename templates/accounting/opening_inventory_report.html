<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ‚Ø±ÙŠØ± Ø¬Ø±Ø¯ Ø¨Ø¶Ø§Ø¹Ø© Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø© - {{ opening_inventory.inventory_number }}</title>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { margin: 0; }
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 20px;
        }
        
        .company-name {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .report-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .report-subtitle {
            font-size: 16px;
            color: #666;
        }
        
        .info-section {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
        }
        
        .info-column {
            flex: 1;
        }
        
        .info-row {
            display: flex;
            margin-bottom: 8px;
        }
        
        .info-label {
            font-weight: bold;
            min-width: 120px;
            color: #495057;
        }
        
        .info-value {
            color: #212529;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            color: white;
        }
        
        .status-draft { background-color: #ffc107; }
        .status-approved { background-color: #17a2b8; }
        .status-posted { background-color: #28a745; }
        .status-cancelled { background-color: #dc3545; }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .items-table th,
        .items-table td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: right;
        }
        
        .items-table th {
            background-color: #e9ecef;
            font-weight: bold;
            color: #495057;
        }
        
        .items-table tbody tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .items-table tbody tr:hover {
            background-color: #e3f2fd;
        }
        
        .total-row {
            font-weight: bold;
            background-color: #007bff !important;
            color: white;
        }
        
        .summary-section {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
        }
        
        .summary-card {
            text-align: center;
            padding: 15px;
            border: 2px solid #007bff;
            border-radius: 8px;
            min-width: 150px;
        }
        
        .summary-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .summary-value {
            font-size: 20px;
            font-weight: bold;
            color: #007bff;
        }
        
        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid #dee2e6;
            padding-top: 15px;
        }
        
        .print-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .print-btn:hover {
            background: #0056b3;
        }
        
        .condition-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            color: white;
        }
        
        .condition-new { background-color: #007bff; }
        .condition-good { background-color: #28a745; }
        .condition-fair { background-color: #ffc107; color: #212529; }
        .condition-poor { background-color: #dc3545; }
        .condition-damaged { background-color: #6c757d; }
    </style>
</head>
<body>
    <button class="print-btn no-print" onclick="window.print()">
        ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    </button>

    <div class="header">
        <div class="company-name">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø²Ù† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</div>
        <div class="report-title">ØªÙ‚Ø±ÙŠØ± Ø¬Ø±Ø¯ Ø¨Ø¶Ø§Ø¹Ø© Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø©</div>
        <div class="report-subtitle">{{ opening_inventory.inventory_number }}</div>
    </div>

    <div class="info-section">
        <div class="info-column">
            <div class="info-row">
                <span class="info-label">Ø±Ù‚Ù… Ø§Ù„Ø¬Ø±Ø¯:</span>
                <span class="info-value">{{ opening_inventory.inventory_number }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                <span class="info-value">{{ opening_inventory.date|date:"Y-m-d" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø§Ù„Ù…Ø®Ø²Ù†:</span>
                <span class="info-value">{{ opening_inventory.warehouse.name }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©:</span>
                <span class="info-value">{{ opening_inventory.fiscal_year }}</span>
            </div>
        </div>
        <div class="info-column">
            <div class="info-row">
                <span class="info-label">Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø©:</span>
                <span class="info-value">{{ opening_inventory.period_name|default:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø§Ù„Ø¹Ù…Ù„Ø©:</span>
                <span class="info-value">{{ opening_inventory.currency.name|default:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù:</span>
                <span class="info-value">{{ opening_inventory.exchange_rate }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
                <span class="info-value">
                    {% if opening_inventory.status == 'DRAFT' %}
                        <span class="status-badge status-draft">Ù…Ø³ÙˆØ¯Ø©</span>
                    {% elif opening_inventory.status == 'APPROVED' %}
                        <span class="status-badge status-approved">Ù…Ø¹ØªÙ…Ø¯</span>
                    {% elif opening_inventory.status == 'POSTED' %}
                        <span class="status-badge status-posted">Ù…Ø±Ø­Ù„</span>
                    {% elif opening_inventory.status == 'CANCELLED' %}
                        <span class="status-badge status-cancelled">Ù…Ù„ØºÙŠ</span>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>

    <div class="summary-section">
        <div class="summary-card">
            <div class="summary-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙ†Ø§Ù</div>
            <div class="summary-value">{{ items.count }}</div>
        </div>
        <div class="summary-card">
            <div class="summary-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ§Øª</div>
            <div class="summary-value">{{ total_quantity }}</div>
        </div>
        <div class="summary-card">
            <div class="summary-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©</div>
            <div class="summary-value">{{ total_value }} Ø¬.Ù…</div>
        </div>
    </div>

    {% if items %}
        <table class="items-table">
            <thead>
                <tr>
                    <th style="width: 5%;">#</th>
                    <th style="width: 20%;">Ø§Ù„ØµÙ†Ù</th>
                    <th style="width: 10%;">Ø§Ù„ÙƒÙˆØ¯</th>
                    <th style="width: 10%;">Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                    <th style="width: 10%;">Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                    <th style="width: 10%;">ØªÙƒÙ„ÙØ© Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                    <th style="width: 10%;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                    <th style="width: 10%;">Ø±Ù‚Ù… Ø§Ù„Ø¯ÙØ¹Ø©</th>
                    <th style="width: 8%;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    <th style="width: 7%;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.item.name }}</td>
                        <td>{{ item.item.code }}</td>
                        <td>{{ item.opening_quantity }}</td>
                        <td>{{ item.item.unit.name|default:"-" }}</td>
                        <td>{{ item.unit_cost }} Ø¬.Ù…</td>
                        <td>{{ item.total_value }} Ø¬.Ù…</td>
                        <td>{{ item.batch_number|default:"-" }}</td>
                        <td>
                            {% if item.condition == 'NEW' %}
                                <span class="condition-badge condition-new">Ø¬Ø¯ÙŠØ¯</span>
                            {% elif item.condition == 'GOOD' %}
                                <span class="condition-badge condition-good">Ø¬ÙŠØ¯</span>
                            {% elif item.condition == 'FAIR' %}
                                <span class="condition-badge condition-fair">Ù…Ù‚Ø¨ÙˆÙ„</span>
                            {% elif item.condition == 'POOR' %}
                                <span class="condition-badge condition-poor">Ø¶Ø¹ÙŠÙ</span>
                            {% elif item.condition == 'DAMAGED' %}
                                <span class="condition-badge condition-damaged">ØªØ§Ù„Ù</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if item.expiry_date %}
                                {{ item.expiry_date|date:"Y-m-d" }}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                <tr class="total-row">
                    <td colspan="3">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td>
                    <td>{{ total_quantity }}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>{{ total_value }} Ø¬.Ù…</td>
                    <td colspan="3">-</td>
                </tr>
            </tbody>
        </table>
    {% else %}
        <div style="text-align: center; padding: 40px; color: #666;">
            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø±Ø¯</h3>
        </div>
    {% endif %}

    {% if opening_inventory.notes %}
        <div style="margin-bottom: 30px;">
            <h4 style="color: #007bff; margin-bottom: 10px;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-right: 4px solid #007bff;">
                {{ opening_inventory.notes }}
            </div>
        </div>
    {% endif %}

    {% if opening_inventory.approved_by or opening_inventory.posted_by %}
        <div style="margin-bottom: 30px;">
            <h4 style="color: #007bff; margin-bottom: 15px;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ ÙˆØ§Ù„ØªØ±Ø­ÙŠÙ„:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                {% if opening_inventory.approved_by %}
                    <div style="margin-bottom: 10px;">
                        <strong>Ù…Ø¹ØªÙ…Ø¯ Ù…Ù†:</strong> {{ opening_inventory.approved_by.get_full_name|default:opening_inventory.approved_by.username }}
                        <br>
                        <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯:</strong> {{ opening_inventory.approved_date|date:"Y-m-d h:i A" }}
                    </div>
                {% endif %}
                
                {% if opening_inventory.posted_by %}
                    <div>
                        <strong>Ø±Ø­Ù„ Ø¨ÙˆØ§Ø³Ø·Ø©:</strong> {{ opening_inventory.posted_by.get_full_name|default:opening_inventory.posted_by.username }}
                        <br>
                        <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ±Ø­ÙŠÙ„:</strong> {{ opening_inventory.posted_date|date:"Y-m-d h:i A" }}
                    </div>
                {% endif %}
            </div>
        </div>
    {% endif %}

    <div class="footer">
        <div>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ: {{ "now"|date:"Y-m-d h:i:s A" }}</div>
        <div>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø²Ù† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª - Ø¬Ø±Ø¯ Ø¨Ø¶Ø§Ø¹Ø© Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø©</div>
    </div>
</body>
</html>
